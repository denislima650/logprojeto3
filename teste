import telebot, datetime, os, urllib.request
from selenium.webdriver.common.by import By
from selenium import webdriver
data = datetime.datetime.today().strftime("%Y%m%d")
CHAVE_API = "5971673742:AAEJyuVS3k2KDwHnsutcZDbTwvwB5dhixsc" #chave de criação do BOT do telegram via BotFather
bot = telebot.TeleBot(CHAVE_API)
@bot.message_handler(commands=["opcao1"])
def teste():
    import operadores_Web_2 as opw
    mapas123 = opw.operador_StormVista('geck')
    mapas = ['120', '240', '360']
    modelos = ['gfs-ens-suite']
    horario = ['00z']
    mapas123.mapaesp(modelos, horario, mapas, True)
    #mapas123.cfsweekly00z()

def opcao1(mensagem):
    import operadores_Web_2 as opw
    mapas123 = opw.operador_StormVista('geck')
    mapas = ['120', '240']
    modelos = ['ecmwf-suite']
    horario = ['00z']
    mapas123.mapaesp(modelos, horario, mapas, True)
    #mapas123.cfsweekly00z()

@bot.message_handler(commands=["cfs-weekly"])
def opcao2(mensagem):
    import operadores_Web_2 as opw
    mapas123 = opw.operador_StormVista('geck')
    mapas = ['120', '240', '360']
    modelos = ['gfs-ens-suite']
    horario = ['00z']
    #mapas123.mapaesp(modelos, horario, mapas, True)
    mapas123.cfsweekly00z()

def verificar(mensagem):
    return True

@bot.message_handler(func=verificar)
def responder(mensagem):
    texto = """
    Escolha uma opção para continuar (Clique no item):
     /opcao1 Mapas_StormVista
     /opcao2 cfs-weekly
     /opcao3 ecmwf-suite
Responder qualquer outra coisa não vai funcionar, clique em uma das opções"""
    bot.send_message(mensagem, texto)

def e():
    teste()
    chatid = 5942965901
    lista_mapas = ['120', '240', '360']
    bot.send_message(chatid,"GFS-ENS-SUITE")
    for c in lista_mapas:
        data = datetime.datetime.today().strftime("%Y%m%d")
        chatid = 5942965901
        documento = open(fr'C:\Log\OneDrive - GALAPAGOS CAPITAL\5.MIDDLE\Imagens\mapas_stormvista\gfs-ens-suite\{data}\{data}_gfs-ens-suite_00z_{c}.png', 'rb')
        bot.send_document(chatid, documento)

e()
bot.polling()
