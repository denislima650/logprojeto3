import telebot, datetime, os, urllib.request
from selenium.webdriver.common.by import By
from selenium import webdriver
data = datetime.datetime.today().strftime("%Y%m%d")
CHAVE_API = "5971673742:AAEJyuVS3k2KDwHnsutcZDbTwvwB5dhixsc" #chave de criação do BOT do telegram via BotFather
bot = telebot.TeleBot(CHAVE_API)
def teste():
    import operadores_Web_2 as opw
    mapas123 = opw.operador_StormVista('geck')
    mapas123.cfsweekly00z()

@bot.message_handler(commands=["opcao1"])
def opcao1(mensagem):
    data = datetime.datetime.today().strftime("%Y%m%d")
    for c in range(1, 5):
        documento = open(fr'C:\Log\OneDrive - GALAPAGOS CAPITAL\5.MIDDLE\Imagens\mapas_stormvista\cfs-weekly\20221104\20221104_cfs_weekly_{c}.png', 'rb')
        bot.send_document(mensagem.chat.id, documento)
        enviar(mensagem)
        print(mensagem)
def enviar(mensagem):
    data = datetime.datetime.today().strftime("%Y%m%d")
    #documento = open(r'C:\Log\OneDrive - GALAPAGOS CAPITAL\5.MIDDLE\Imagens\mapas_stormvista\cfs-weekly\20221104\20221104_cfs_weekly_2.png', 'rb')
    #bot.send_document(mensagem.chat.id, documento)

def verificar(mensagem):
    return True

@bot.message_handler(func=verificar)
def responder(mensagem):
    texto = """
    Escolha uma opção para continuar (Clique no item):
     /opcao1 Mapas_StormVista
     /opcao2 gfs-ens-suite
     /opcao3 ecmwf-suite
Responder qualquer outra coisa não vai funcionar, clique em uma das opções"""
    bot.send_message(mensagem, texto)

def e():
    for c in range(1, 5):
        chatid = 5942965901
        documento = open(fr'C:\Log\OneDrive - GALAPAGOS CAPITAL\5.MIDDLE\Imagens\mapas_stormvista\cfs-weekly\20221104\20221104_cfs_weekly_{c}.png', 'rb')
        bot.send_document(chatid, documento)
        enviar(mensagem)
        print(mensagem)

e()
bot.polling()
