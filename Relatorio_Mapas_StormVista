import telebot, datetime, os, urllib.request
data = datetime.datetime.today().strftime("%Y%m%d")
CHAVE_API = "5971673742:AAEJyuVS3k2KDwHnsutcZDbTwvwB5dhixsc" #chave de criação do BOT do telegram via BotFather
bot = telebot.TeleBot(CHAVE_API)
@bot.message_handler(commands=["opcao1"])
def opcao1():
    import operadores_Web_2 as opw
    mapas123 = opw.operador_StormVista('geck')
    mapas = ['120', '240', '360']
    modelos = ['gfs-suite', 'gfs-ens-suite', 'ecmwf-suite', 'ecmwf-eps-suite', 'cmc-ens-suite']
    horario = ['00z']
    #mapas123.mapaesp(modelos, horario, mapas, True)
    mapas123.cfsweekly00z()
def verificar(mensagem):
    return True
@bot.message_handler(func=verificar)
def responder(mensagem):
    texto = """
    Escolha uma opção para continuar (Clique no item):
     /opcao1 Baixar mapas
Responder qualquer outra coisa não vai funcionar, clique em uma das opções"""
    bot.reply_to(mensagem, texto)
def envia_mapas():
    diretorio = (fr'C:\Log\OneDrive - GALAPAGOS CAPITAL\5.MIDDLE\Imagens\mapas_stormvista')
    l = os.listdir(diretorio)
    for arquivo in l:
         chatid = 5942965901
         if '.pdf' in arquivo:
             documento = open(fr'{diretorio}\{arquivo}','rb')
             bot.send_document(chatid, documento)
envia_mapas()
bot.polling()
